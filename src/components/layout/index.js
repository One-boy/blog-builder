/*
 * @Author: huyu
 * @Date: 2020-07-15 16:29:21
 * @Last Modified by: huyu
 * @Last Modified time: 2020-07-20 14:10:19
 */

// 布局结构
import React, { useEffect, useState } from "react"
import Popup from "../Popup"
import style from "./index.module.less"

function Main(props) {
  return <section className={style.main}>{props.children}</section>
}

Main.Header = function Header(props) {
  const { left, right } = props
  const [showLeftPopup, setLeftStatus] = useState(false)
  const [showRightPopup, setRightStatus] = useState(false)

  return (
    <header className={style.header}>
      <a onClick={() => setLeftStatus(true)}>
        <CategoryIcon />
      </a>
      <span>{props.children}</span>
      {right && (
        <a onClick={() => setRightStatus(true)}>
          <HeadingIcon />
        </a>
      )}
      {showLeftPopup && (
        <Popup onClose={() => setLeftStatus(false)} dir="left">
          {left}
        </Popup>
      )}
      {showRightPopup && (
        <Popup onClose={() => setRightStatus(false)} dir="right">
          {right}
        </Popup>
      )}
    </header>
  )
}

Main.Content = function Content(props) {
  return <main className={style.content}>{props.children}</main>
}

Main.Left = function Left(props) {
  const [maxHeight, setMaxHeight] = useState(500)
  useEffect(() => {
    if (window.innerHeight !== maxHeight) {
      setMaxHeight(window.innerHeight)
    }
  }, [])
  return (
    <div className={style.left} style={{ maxHeight }}>
      {props.children}
    </div>
  )
}

Main.Right = function Right(props) {
  const [maxHeight, setMaxHeight] = useState(500)
  useEffect(() => {
    if (window.innerHeight !== maxHeight) {
      setMaxHeight(window.innerHeight)
    }
  }, [])
  return (
    <div className={style.right} style={{ maxHeight }}>
      {props.children}
    </div>
  )
}

export default Main

// 分类icon
const CategoryIcon = () => {
  return (
    <svg
      t="1594807932724"
      className="icon"
      viewBox="0 0 1024 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="1167"
    >
      <path
        d="M424.01 420.077c-0.276 0.147-0.426 0.222-0.48 0.247 0.058-0.026 0.138-0.06 0.233-0.099a3.05 3.05 0 0 1 0.246-0.148z m-1.706 1.498c-0.019 0.037-0.093 0.184-0.227 0.434a3.05 3.05 0 0 1 0.148-0.246c0.03-0.072 0.056-0.136 0.08-0.188z m0 0a3.249 3.249 0 0 1 0.012-0.028l-0.012 0.028z m-0.32 0.89l0.003-0.012-0.003 0.012zM423 404.083V304c0-64.617-52.383-117-117-117-64.617 0-117 52.383-117 117 0 64.617 52.383 117 117 117h100.083c7.798 0 13.032-0.271 16.245-0.672 0.401-3.213 0.672-8.447 0.672-16.245zM306 127c97.754 0 177 79.246 177 177v100.083c0 26.746-2.785 36.445-8.014 46.222-5.23 9.778-12.903 17.452-22.68 22.681-9.778 5.23-19.477 8.014-46.223 8.014H306c-97.754 0-177-79.246-177-177s79.246-177 177-177z m114.077 474.99c0.147 0.276 0.222 0.426 0.247 0.48a5.155 5.155 0 0 1-0.099-0.233 3.05 3.05 0 0 1-0.148-0.246z m1.498 1.706c0.037 0.019 0.184 0.093 0.434 0.227a3.05 3.05 0 0 1-0.246-0.148 5.777 5.777 0 0 1-0.188-0.08z m-0.028-0.012a1.435 1.435 0 0 0 0.028 0.012l-0.028-0.012zM404.083 603H304c-64.617 0-117 52.383-117 117 0 64.617 52.383 117 117 117 64.617 0 117-52.383 117-117V619.917c0-7.798-0.271-13.032-0.672-16.245-3.213-0.401-8.447-0.672-16.245-0.672zM304 897c-97.754 0-177-79.246-177-177s79.246-177 177-177h100.083c26.746 0 36.445 2.785 46.222 8.014 9.778 5.23 17.452 12.903 22.681 22.68 5.23 9.778 8.014 19.477 8.014 46.223V720c0 97.754-79.246 177-177 177z m301.923-474.99a11.547 11.547 0 0 1-0.247-0.48c0.026 0.058 0.06 0.138 0.099 0.233 0.055 0.084 0.105 0.167 0.148 0.246z m-1.498-1.706a20.659 20.659 0 0 1-0.434-0.227c0.08 0.043 0.162 0.093 0.246 0.148 0.072 0.03 0.136 0.056 0.188 0.08z m0 0a3.249 3.249 0 0 1 0.028 0.012l-0.028-0.012z m-0.89-0.32l0.012 0.003-0.012-0.003zM621.917 421H722c64.617 0 117-52.383 117-117 0-64.617-52.383-117-117-117-64.617 0-117 52.383-117 117v100.083c0 7.798 0.271 13.032 0.672 16.245 3.213 0.401 8.447 0.672 16.245 0.672zM722 127c97.754 0 177 79.246 177 177s-79.246 177-177 177H621.917c-26.746 0-36.445-2.785-46.222-8.014-9.778-5.23-17.452-12.903-22.681-22.68-5.23-9.778-8.014-19.477-8.014-46.223V304c0-97.754 79.246-177 177-177zM601.99 603.923c0.276-0.147 0.426-0.222 0.48-0.247a5.155 5.155 0 0 1-0.233 0.099 3.05 3.05 0 0 1-0.246 0.148z m1.706-1.498c0.019-0.037 0.093-0.184 0.227-0.434a3.05 3.05 0 0 1-0.148 0.246 5.777 5.777 0 0 1-0.08 0.188z m-0.012 0.028a1.435 1.435 0 0 0 0.012-0.028l-0.012 0.028zM603 619.917V720c0 64.617 52.383 117 117 117 64.617 0 117-52.383 117-117 0-64.617-52.383-117-117-117H619.917c-7.798 0-13.032 0.271-16.245 0.672-0.401 3.213-0.672 8.447-0.672 16.245zM720 897c-97.754 0-177-79.246-177-177V619.917c0-26.746 2.785-36.445 8.014-46.222 5.23-9.778 12.903-17.452 22.68-22.681 9.778-5.23 19.477-8.014 46.223-8.014H720c97.754 0 177 79.246 177 177s-79.246 177-177 177z"
        p-id="1168"
      ></path>
    </svg>
  )
}
// 章节icon
const HeadingIcon = () => {
  return (
    <svg
      t="1594808655384"
      className="icon"
      viewBox="0 0 1152 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="1967"
    >
      <path
        d="M978.560364 186.181818c0 24.522182-16.638545 46.545455-37.158545 46.545455L177.188 232.727273c-20.520727 0-37.159273-22.023273-37.159273-46.545455l0 0c0-24.522182 16.637818-46.545455 37.159273-46.545455l764.213818 0C961.921818 139.636364 978.560364 161.659636 978.560364 186.181818L978.560364 186.181818z"
        p-id="1968"
      ></path>
      <path
        d="M978.560364 512c0 24.522182-16.638545 46.545455-37.158545 46.545455L177.188 558.545455c-20.520727 0-37.159273-22.023273-37.159273-46.545455l0 0c0-24.522182 16.637818-46.545455 37.159273-46.545455l764.213818 0C961.921818 465.454545 978.560364 487.477818 978.560364 512L978.560364 512z"
        p-id="1969"
      ></path>
      <path
        d="M978.560364 837.818182c0 24.522182-16.638545 46.545455-37.158545 46.545455L177.188 884.363636c-20.520727 0-37.159273-22.023273-37.159273-46.545455l0 0c0-24.522182 16.637818-46.545455 37.159273-46.545455l764.213818 0C961.921818 791.272727 978.560364 813.296 978.560364 837.818182L978.560364 837.818182z"
        p-id="1970"
      ></path>
    </svg>
  )
}
